<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Color Analyzer Pro - í—¤ì–´ë””ìì´ë„ˆ ì „ìš©</title>
    
    <!-- PWA ë©”íƒ€ë°ì´í„° -->
    <meta name="description" content="í—¤ì–´ë””ìì´ë„ˆë¥¼ ìœ„í•œ ì „ë¬¸ í¼ìŠ¤ë„ì»¬ëŸ¬ ì§„ë‹¨ ì‹œìŠ¤í…œ">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- PWA ë§¤ë‹ˆí˜ìŠ¤íŠ¸ -->
    <link rel="manifest" href="manifest.json">
    
    <!-- ì•„ì´ì½˜ë“¤ -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/images/icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="assets/images/icons/icon-192x192.png">
    
    <!-- Google Fonts (404 ì˜¤ë¥˜ í•´ê²°) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- ì¸ë¼ì¸ í•µì‹¬ CSS -->
    <style>
        /* CSS ë³€ìˆ˜ */
        :root {
            --font-korean: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-english: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --border-color: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-korean);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }

        /* ë¡œë”© ìŠ¤í¬ë¦° */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-container {
            text-align: center;
            color: white;
            max-width: 600px;
            padding: 2rem;
        }

        .loading-logo h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            animation: logoGlow 2s ease-in-out infinite alternate;
        }

        .loading-logo p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 3rem;
        }

        @keyframes logoGlow {
            0% { text-shadow: 0 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.1); }
            100% { text-shadow: 0 2px 4px rgba(0,0,0,0.3), 0 0 30px rgba(255,255,255,0.3); }
        }

        .loading-progress-container {
            margin-bottom: 2rem;
        }

        .loading-progress-bar {
            width: 400px;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            overflow: hidden;
            margin: 0 auto 1rem;
        }

        .loading-progress {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .loading-message {
            font-size: 1.1rem;
            font-weight: 500;
        }

        .loading-details {
            margin-top: 2rem;
        }

        .loading-step {
            margin: 0.5rem 0;
            font-size: 0.95rem;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .loading-step.active {
            opacity: 1;
            font-weight: 500;
        }

        /* ë©”ì¸ ì•± */
        .main-app {
            display: none;
            height: 100vh;
            background: var(--bg-primary);
            position: relative;
        }

        /* í—¤ë” */
        .app-header {
            background: white;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            box-shadow: var(--shadow-sm);
            border-bottom: 1px solid var(--border-color);
        }

        .app-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 0;
        }

        .current-customer {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .header-btn {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            color: var(--text-primary);
            transition: all 0.2s ease;
            margin-left: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        /* ë©”ì¸ ì»¨í…ì¸  */
        .main-content {
            height: calc(100vh - 80px);
            overflow-y: auto;
            padding: 2rem;
            background: var(--bg-secondary);
        }

        .diagnosis-mode-selection h2 {
            text-align: center;
            font-size: 2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 3rem;
        }

        .mode-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .mode-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow-lg);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .mode-card.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
        }

        .mode-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
            border-color: var(--primary-color);
        }

        .mode-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
        }

        .mode-card h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .mode-card.selected h3 {
            color: white;
        }

        .mode-card p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .mode-card.selected p {
            color: rgba(255,255,255,0.9);
        }

        .mode-accuracy {
            display: inline-block;
            background: var(--success-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
        }

        .mode-select-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
            width: 100%;
        }

        .mode-select-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .mode-select-btn.recommended {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            position: relative;
        }

        .mode-select-btn.recommended::before {
            content: 'â­ ';
        }

        /* ì§„ë‹¨ ì˜ì—­ */
        .diagnosis-area {
            display: none;
        }

        .diagnosis-area.active {
            display: block;
        }

        .diagnosis-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* AI ëª¨ë“œ ì»¨í…Œì´ë„ˆ */
        .ai-mode-container {
            display: none;
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .ai-mode-container.active {
            display: block;
        }

        .ai-mode-container h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: var(--text-primary);
        }

        .camera-container {
            position: relative;
            width: 100%;
            max-width: 640px;
            height: 480px;
            margin: 0 auto 2rem;
            border-radius: 12px;
            overflow: hidden;
            background: #f0f0f0;
        }

        .camera-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.3);
            color: white;
            font-size: 1.2rem;
            font-weight: 500;
        }

        .camera-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .camera-controls button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .primary-btn {
            background: var(--primary-color);
            color: white;
        }

        .primary-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .secondary-btn {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .secondary-btn:hover {
            background: var(--border-color);
        }

        /* ë“œë ˆì´í•‘ ëª¨ë“œ ì»¨í…Œì´ë„ˆ */
        .draping-mode-container {
            display: none;
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .draping-mode-container.active {
            display: block;
        }

        .draping-mode-container h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: var(--text-primary);
        }

        .draping-workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .color-palette {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
        }

        .color-palette h4 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .color-swatches {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        .color-swatch {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 3px solid transparent;
        }

        .color-swatch:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        .color-swatch.selected {
            border-color: var(--primary-color);
            transform: scale(1.15);
        }

        .draping-notes {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
        }

        .draping-notes h4 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .draping-notes textarea {
            width: 100%;
            height: 200px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            font-family: inherit;
            resize: vertical;
        }

        .draping-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .draping-controls button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        /* ê²°ê³¼ ì˜ì—­ */
        .diagnosis-result {
            display: none;
        }

        .diagnosis-result.active {
            display: block;
        }

        .result-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .result-container h2 {
            text-align: center;
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: var(--text-primary);
        }

        .result-summary {
            text-align: center;
            margin-bottom: 2rem;
        }

        .season-badge {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 1rem 2rem;
            border-radius: 16px;
            margin-bottom: 1.5rem;
        }

        .season-name {
            font-size: 1.5rem;
            font-weight: 600;
            display: block;
        }

        .confidence {
            font-size: 1rem;
            opacity: 0.9;
        }

        .result-details {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .detail-item:last-child {
            margin-bottom: 0;
        }

        .label {
            font-weight: 500;
            color: var(--text-secondary);
        }

        .value {
            font-weight: 600;
            color: var(--text-primary);
        }

        .result-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .result-actions button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        /* ì‚¬ì´ë“œë°” */
        .sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -4px 0 20px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: right 0.3s ease;
        }

        .sidebar.show {
            right: 0;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-header h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .close-sidebar {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .sidebar-content {
            padding: 1.5rem;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .loading-logo h1 {
                font-size: 2.5rem;
            }
            
            .loading-progress-bar {
                width: 300px;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .mode-cards {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .draping-workspace {
                grid-template-columns: 1fr;
            }
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .main-app.loaded {
            animation: fadeInUp 0.6s ease-out;
        }

        /* í† ìŠ¤íŠ¸ ë©”ì‹œì§€ */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            pointer-events: none;
        }

        .toast {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 10px;
            padding: 16px;
            pointer-events: auto;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            border-left: 4px solid var(--primary-color);
            min-width: 300px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-success {
            border-left-color: var(--success-color);
        }

        .toast-error {
            border-left-color: var(--error-color);
        }

        .toast-warning {
            border-left-color: var(--warning-color);
        }

        .toast-content {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toast-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            margin-left: auto;
        }
    </style>

    <!-- ì™¸ë¶€ CSS íŒŒì¼ë“¤ (ë¹„ë™ê¸° ë¡œë“œ, 404 ì˜¤ë¥˜ ë°©ì§€) -->
    <link rel="preload" href="css/styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'" onerror="console.warn('styles.css ë¡œë“œ ì‹¤íŒ¨')">
    <link rel="preload" href="css/tablet.css" as="style" onload="this.onload=null;this.rel='stylesheet'" onerror="console.warn('tablet.css ë¡œë“œ ì‹¤íŒ¨')">
    <link rel="preload" href="css/components.css" as="style" onload="this.onload=null;this.rel='stylesheet'" onerror="console.warn('components.css ë¡œë“œ ì‹¤íŒ¨')">
    <link rel="preload" href="css/animations.css" as="style" onload="this.onload=null;this.rel='stylesheet'" onerror="console.warn('animations.css ë¡œë“œ ì‹¤íŒ¨')">
    
    <noscript>
        <link rel="stylesheet" href="css/styles.css">
        <link rel="stylesheet" href="css/tablet.css">
        <link rel="stylesheet" href="css/components.css">
        <link rel="stylesheet" href="css/animations.css">
    </noscript>
</head>

<body>
    <!-- ë¡œë”© ìŠ¤í¬ë¦° -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-container">
            <div class="loading-logo">
                <h1>Personal Color Pro</h1>
                <p>í—¤ì–´ë””ìì´ë„ˆ ì „ìš© ì§„ë‹¨ ì‹œìŠ¤í…œ</p>
            </div>
            
            <div class="loading-progress-container">
                <div class="loading-progress-bar">
                    <div class="loading-progress" id="loading-progress" style="width: 0%"></div>
                </div>
                <div class="loading-message" id="loading-message">ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...</div>
            </div>
            
            <div class="loading-details">
                <div class="loading-step" id="step-config">â³ ì„¤ì • ë¡œë“œ ì¤‘...</div>
                <div class="loading-step" id="step-modules">â³ ëª¨ë“ˆ ë¡œë“œ ì¤‘...</div>
                <div class="loading-step" id="step-ai">â³ AI ì‹œìŠ¤í…œ ì¤€ë¹„ ì¤‘...</div>
                <div class="loading-step" id="step-ui">â³ UI ì´ˆê¸°í™” ì¤‘...</div>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ -->
    <div class="main-app" id="main-app">
        <!-- í—¤ë” -->
        <header class="app-header">
            <div class="header-left">
                <div>
                    <h1 class="app-title">Personal Color Pro</h1>
                    <div class="current-customer" id="current-customer">ê³ ê°ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
                </div>
            </div>
            
            <div class="header-right">
                <button id="customer-management" class="header-btn" title="ê³ ê° ê´€ë¦¬">
                    ğŸ‘¥ ê³ ê° ê´€ë¦¬
                </button>
                
                <button id="settings-btn" class="header-btn" title="ì„¤ì •">
                    âš™ï¸ ì„¤ì •
                </button>
            </div>
        </header>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="main-content">
            <!-- ì§„ë‹¨ ëª¨ë“œ ì„ íƒ -->
            <section class="diagnosis-mode-selection" id="mode-selection">
                <h2>ì§„ë‹¨ ëª¨ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>
                
                <div class="mode-cards">
                    <div class="mode-card" data-mode="ai_photo" tabindex="0">
                        <div class="mode-icon">ğŸ¤–</div>
                        <h3>AI ì‚¬ì§„ ë¶„ì„</h3>
                        <p>ìŠ¤ë§ˆíŠ¸í°ìœ¼ë¡œ ê°„í¸í•˜ê²Œ<br>5-7ë¶„ ì†Œìš”</p>
                        <div class="mode-accuracy">ì •í™•ë„: 85%</div>
                        <button class="mode-select-btn">ì„ íƒ</button>
                    </div>
                    
                    <div class="mode-card" data-mode="draping" tabindex="0">
                        <div class="mode-icon">ğŸ¨</div>
                        <h3>ì „ë¬¸ê°€ ë“œë ˆì´í•‘</h3>
                        <p>ìƒ‰ìƒ ì²œì„ í™œìš©í•œ ì •ë°€ ì§„ë‹¨<br>15-20ë¶„ ì†Œìš”</p>
                        <div class="mode-accuracy">ì •í™•ë„: 95%</div>
                        <button class="mode-select-btn">ì„ íƒ</button>
                    </div>
                    
                    <div class="mode-card" data-mode="hybrid" tabindex="0">
                        <div class="mode-icon">âš¡</div>
                        <h3>í•˜ì´ë¸Œë¦¬ë“œ</h3>
                        <p>AI + ì „ë¬¸ê°€ ê²€ì¦<br>10-15ë¶„ ì†Œìš”</p>
                        <div class="mode-accuracy">ì •í™•ë„: 98%</div>
                        <button class="mode-select-btn recommended">ì¶”ì²œ</button>
                    </div>
                </div>
            </section>

            <!-- ì§„ë‹¨ ì˜ì—­ -->
            <section class="diagnosis-area" id="diagnosis-area">
                <div class="diagnosis-container">
                    <!-- AI ëª¨ë“œ ì»¨í…Œì´ë„ˆ -->
                    <div class="ai-mode-container" id="ai-mode-container">
                        <h3>ğŸ“· AI ì‚¬ì§„ ë¶„ì„</h3>
                        <div class="camera-container">
                            <video class="camera-preview" id="camera-preview" autoplay muted playsinline></video>
                            <canvas id="analysis-canvas" style="display: none;"></canvas>
                            <div class="camera-overlay">
                                <div class="face-guide">ì–¼êµ´ì„ í”„ë ˆì„ì— ë§ì¶°ì£¼ì„¸ìš”</div>
                            </div>
                        </div>
                        
                        <div class="camera-controls">
                            <button id="capture-btn" class="primary-btn">ğŸ“¸ ì´¬ì˜</button>
                            <button id="upload-btn" class="secondary-btn">ğŸ“ íŒŒì¼ ì„ íƒ</button>
                            <input type="file" id="file-input" accept="image/*" style="display: none;">
                        </div>
                    </div>
                    
                    <!-- ë“œë ˆì´í•‘ ëª¨ë“œ ì»¨í…Œì´ë„ˆ -->
                    <div class="draping-mode-container" id="draping-mode-container">
                        <h3>ğŸ¨ ì „ë¬¸ê°€ ë“œë ˆì´í•‘</h3>
                        <div class="draping-workspace">
                            <div class="color-palette">
                                <h4>í…ŒìŠ¤íŠ¸ ìƒ‰ìƒ</h4>
                                <div class="color-swatches">
                                    <div class="color-swatch" data-color="#FF6B6B" style="background: #FF6B6B;" title="ì½”ë„ í•‘í¬"></div>
                                    <div class="color-swatch" data-color="#4ECDC4" style="background: #4ECDC4;" title="í„°ì¿¼ì´ì¦ˆ"></div>
                                    <div class="color-swatch" data-color="#45B7D1" style="background: #45B7D1;" title="ìŠ¤ì¹´ì´ ë¸”ë£¨"></div>
                                    <div class="color-swatch" data-color="#96CEB4" style="background: #96CEB4;" title="ë¯¼íŠ¸ ê·¸ë¦°"></div>
                                    <div class="color-swatch" data-color="#FECA57" style="background: #FECA57;" title="ê³¨ë“  ì˜ë¡œìš°"></div>
                                    <div class="color-swatch" data-color="#FF9FF3" style="background: #FF9FF3;" title="ë¼ë²¤ë” í•‘í¬"></div>
                                    <div class="color-swatch" data-color="#54A0FF" style="background: #54A0FF;" title="ë¸Œë¼ì´íŠ¸ ë¸”ë£¨"></div>
                                    <div class="color-swatch" data-color="#5F27CD" style="background: #5F27CD;" title="ë”¥ í¼í”Œ"></div>
                                </div>
                            </div>
                            
                            <div class="draping-notes">
                                <h4>ê´€ì°° ë©”ëª¨</h4>
                                <textarea id="draping-notes" placeholder="ìƒ‰ìƒë³„ í”¼ë¶€ ë°˜ì‘ì„ ê¸°ë¡í•˜ì„¸ìš”...&#10;&#10;ì˜ˆì‹œ:&#10;â€¢ ì½”ë„ í•‘í¬: í”¼ë¶€ê°€ ë°ì•„ ë³´ì„&#10;â€¢ í„°ì¿¼ì´ì¦ˆ: í˜ˆìƒ‰ì´ ì¢‹ì•„ ë³´ì„&#10;â€¢ ìŠ¤ì¹´ì´ ë¸”ë£¨: í”¼ë¶€í†¤ê³¼ ì˜ ì–´ìš¸ë¦¼"></textarea>
                            </div>
                        </div>
                        
                        <div class="draping-controls">
                            <button id="add-comparison" class="primary-btn">ë¹„êµ ì¶”ê°€</button>
                            <button id="complete-draping" class="secondary-btn">ì§„ë‹¨ ì™„ë£Œ</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ê²°ê³¼ ì˜ì—­ -->
            <section class="diagnosis-result" id="diagnosis-result">
                <div class="result-container">
                    <h2>ğŸ‰ ì§„ë‹¨ ê²°ê³¼</h2>
                    
                    <div class="result-summary">
                        <div class="season-badge">
                            <span class="season-name">ë´„ ì›œí†¤</span>
                            <span class="confidence">92% í™•ì‹ </span>
                        </div>
                        
                        <div class="result-details">
                            <div class="detail-item">
                                <span class="label">í”¼ë¶€ í†¤:</span>
                                <span class="value">ë”°ëœ»í•œ í†¤</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">ë°ê¸°:</span>
                                <span class="value">ë°ì€ í†¤</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">ì±„ë„:</span>
                                <span class="value">ì„ ëª…í•œ í†¤</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-actions">
                        <button id="generate-report" class="primary-btn">
                            ğŸ“Š PDF ë³´ê³ ì„œ ìƒì„±
                        </button>
                        <button id="save-result" class="secondary-btn">
                            ğŸ’¾ ê²°ê³¼ ì €ì¥
                        </button>
                        <button id="new-diagnosis" class="secondary-btn">
                            ğŸ”„ ìƒˆ ì§„ë‹¨
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- ì‚¬ì´ë“œë°” (ê³ ê° ê´€ë¦¬) -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3>ê³ ê° ê´€ë¦¬</h3>
                <button class="close-sidebar" id="close-sidebar">âœ•</button>
            </div>
            
            <div class="sidebar-content">
                <div class="customer-search">
                    <input type="text" placeholder="ê³ ê° ê²€ìƒ‰..." id="customer-search">
                </div>
                
                <div class="customer-list" id="customer-list">
                    <p style="text-align: center; color: #6b7280; margin-top: 2rem;">ë“±ë¡ëœ ê³ ê°ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
                
                <button id="add-customer" class="header-btn" style="width: 100%; justify-content: center; margin-top: 1rem;">
                    â• ìƒˆ ê³ ê° ì¶”ê°€
                </button>
            </div>
        </aside>
    </div>

    <!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ì»¨í…Œì´ë„ˆ -->
    <div class="toast-container" id="toast-container"></div>

    <!-- JavaScript ì‹œì‘ -->
    <script>
        // ì „ì—­ ì„¤ì •
        window.PersonalColorApp = {
            version: '1.0.0',
            buildTime: new Date().toISOString(),
            isLoaded: false,
            currentMode: 'selection',
            customer: null,
            diagnosis: null,
            drapingData: {
                selectedColors: [],
                notes: '',
                comparisons: []
            }
        };

        // ë¡œë”© ê´€ë¦¬ì
        class LoadingManager {
            constructor() {
                this.currentProgress = 0;
                this.isComplete = false;
            }

            updateProgress(percentage, message) {
                this.currentProgress = Math.min(100, Math.max(0, percentage));
                
                const progressBar = document.getElementById('loading-progress');
                const messageEl = document.getElementById('loading-message');
                
                if (progressBar) {
                    progressBar.style.width = this.currentProgress + '%';
                }
                
                if (messageEl && message) {
                    messageEl.textContent = message;
                }
            }

            updateStep(stepId, status, customMessage) {
                const step = document.getElementById(stepId);
                if (!step) return;

                const icon = status === 'complete' ? 'âœ…' : 
                            status === 'error' ? 'âŒ' : 
                            status === 'active' ? 'â³' : 'â³';
                
                const message = customMessage || step.textContent.replace(/[â³âœ…âŒ]\s*/, '');
                step.textContent = `${icon} ${message}`;
                
                if (status === 'active') {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            }

            complete() {
                if (this.isComplete) return;
                this.isComplete = true;
                
                this.updateProgress(100, 'ì¤€ë¹„ ì™„ë£Œ!');
                
                setTimeout(() => {
                    document.getElementById('loading-screen').style.display = 'none';
                    const mainApp = document.getElementById('main-app');
                    mainApp.style.display = 'block';
                    mainApp.classList.add('loaded');
                    window.PersonalColorApp.isLoaded = true;
                    
                    // ë¡œë”© ì™„ë£Œ ì´ë²¤íŠ¸
                    window.dispatchEvent(new CustomEvent('appLoaded'));
                }, 300);
            }
        }

        // ì „ì—­ ë¡œë”© ê´€ë¦¬ì
        window.loadingManager = new LoadingManager();

        // ëª¨ë“œ ê´€ë¦¬ì
        class ModeManager {
            constructor() {
                this.currentMode = 'selection';
                this.setupModeSelection();
            }

            setupModeSelection() {
                document.querySelectorAll('.mode-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        const mode = card.getAttribute('data-mode');
                        this.switchToMode(mode);
                    });
                });
            }

            switchToMode(mode) {
                console.log(`ğŸ”„ ëª¨ë“œ ì „í™˜: ${this.currentMode} â†’ ${mode}`);
                
                // ëª¨ë“  ì¹´ë“œì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
                document.querySelectorAll('.mode-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                // ì„ íƒëœ ì¹´ë“œì— selected í´ë˜ìŠ¤ ì¶”ê°€
                const selectedCard = document.querySelector(`.mode-card[data-mode="${mode}"]`);
                if (selectedCard) {
                    selectedCard.classList.add('selected');
                }

                // UI ì—…ë°ì´íŠ¸
                this.updateModeUI(mode);
                
                // ìƒíƒœ ì—…ë°ì´íŠ¸
                this.currentMode = mode;
                window.PersonalColorApp.currentMode = mode;
                
                // ëª¨ë“œë³„ ì´ˆê¸°í™”
                this.initializeMode(mode);
                
                // í† ìŠ¤íŠ¸ ë©”ì‹œì§€
                this.showToast(`${this.getModeDisplayName(mode)} ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            }

            updateModeUI(mode) {
                const modeSelection = document.getElementById('mode-selection');
                const diagnosisArea = document.getElementById('diagnosis-area');
                const aiContainer = document.getElementById('ai-mode-container');
                const drapingContainer = document.getElementById('draping-mode-container');
                const resultArea = document.getElementById('diagnosis-result');

                // ëª¨ë“  ì˜ì—­ ìˆ¨ê¸°ê¸°
                if (modeSelection) modeSelection.style.display = 'none';
                if (diagnosisArea) diagnosisArea.style.display = 'none';
                if (aiContainer) aiContainer.classList.remove('active');
                if (drapingContainer) drapingContainer.classList.remove('active');
                if (resultArea) resultArea.classList.remove('active');

                // ì„ íƒëœ ëª¨ë“œì— ë”°ë¼ í‘œì‹œ
                if (mode === 'selection') {
                    if (modeSelection) modeSelection.style.display = 'block';
                } else {
                    if (diagnosisArea) {
                        diagnosisArea.style.display = 'block';
                        diagnosisArea.classList.add('active');
                    }
                    
                    if (mode === 'ai_photo' || mode === 'hybrid') {
                        if (aiContainer) aiContainer.classList.add('active');
                    }
                    
                    if (mode === 'draping' || mode === 'hybrid') {
                        if (drapingContainer) drapingContainer.classList.add('active');
                    }
                }
            }

            initializeMode(mode) {
                switch (mode) {
                    case 'ai_photo':
                    case 'hybrid':
                        this.initializeAIMode();
                        break;
                    case 'draping':
                        this.initializeDrapingMode();
                        break;
                }
            }

            initializeAIMode() {
                console.log('ğŸ“· AI ëª¨ë“œ ì´ˆê¸°í™”');
                
                // ì¹´ë©”ë¼ ë²„íŠ¼ ì´ë²¤íŠ¸
                const captureBtn = document.getElementById('capture-btn');
                const uploadBtn = document.getElementById('upload-btn');
                const fileInput = document.getElementById('file-input');

                if (captureBtn) {
                    captureBtn.onclick = () => this.capturePhoto();
                }

                if (uploadBtn && fileInput) {
                    uploadBtn.onclick = () => fileInput.click();
                    fileInput.onchange = (e) => {
                        if (e.target.files.length > 0) {
                            this.handleFileUpload(e.target.files[0]);
                        }
                    };
                }

                // ì¹´ë©”ë¼ ì‹œì‘ ì‹œë„
                this.startCamera();
            }

            initializeDrapingMode() {
                console.log('ğŸ¨ ë“œë ˆì´í•‘ ëª¨ë“œ ì´ˆê¸°í™”');
                
                // ìƒ‰ìƒ ê²¬ë³¸ ì´ë²¤íŠ¸
                document.querySelectorAll('.color-swatch').forEach(swatch => {
                    swatch.addEventListener('click', (e) => {
                        const color = e.target.getAttribute('data-color');
                        this.selectDrapingColor(color, e.target);
                    });
                });

                // ë“œë ˆì´í•‘ ë²„íŠ¼ ì´ë²¤íŠ¸
                const addComparisonBtn = document.getElementById('add-comparison');
                const completeDrapingBtn = document.getElementById('complete-draping');

                if (addComparisonBtn) {
                    addComparisonBtn.onclick = () => this.addDrapingComparison();
                }

                if (completeDrapingBtn) {
                    completeDrapingBtn.onclick = () => this.completeDraping();
                }
            }

            async startCamera() {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ 
                        video: { 
                            width: 640, 
                            height: 480,
                            facingMode: 'user'
                        } 
                    });
                    
                    const video = document.getElementById('camera-preview');
                    if (video) {
                        video.srcObject = stream;
                        
                        // ì˜¤ë²„ë ˆì´ ìˆ¨ê¸°ê¸°
                        const overlay = document.querySelector('.camera-overlay');
                        if (overlay) {
                            overlay.style.display = 'none';
                        }
                    }
                    
                    console.log('ğŸ“· ì¹´ë©”ë¼ ì‹œì‘ë¨');
                } catch (error) {
                    console.warn('ì¹´ë©”ë¼ ì‹œì‘ ì‹¤íŒ¨:', error);
                    this.showToast('ì¹´ë©”ë¼ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ ì—…ë¡œë“œë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”.', 'warning');
                }
            }

            capturePhoto() {
                const video = document.getElementById('camera-preview');
                const canvas = document.getElementById('analysis-canvas');
                
                if (!video || !canvas) return;

                const ctx = canvas.getContext('2d');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                ctx.drawImage(video, 0, 0);

                // Mock ë¶„ì„ ê²°ê³¼
                setTimeout(() => {
                    const mockResult = {
                        season: 'spring',
                        confidence: 87,
                        undertone: 'warm',
                        lightness: 'light',
                        saturation: 'medium'
                    };
                    this.showDiagnosisResult(mockResult);
                }, 2000);

                this.showToast('ì‚¬ì§„ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');
            }

            handleFileUpload(file) {
                if (!file.type.startsWith('image/')) {
                    this.showToast('ì´ë¯¸ì§€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.', 'error');
                    return;
                }

                this.showToast('ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

                // Mock ë¶„ì„
                setTimeout(() => {
                    const mockResult = {
                        season: 'summer',
                        confidence: 91,
                        undertone: 'cool',
                        lightness: 'light',
                        saturation: 'medium'
                    };
                    this.showDiagnosisResult(mockResult);
                }, 2000);
            }

            selectDrapingColor(color, element) {
                console.log('ìƒ‰ìƒ ì„ íƒ:', color);
                
                // ì´ì „ ì„ íƒ í•´ì œ
                document.querySelectorAll('.color-swatch').forEach(swatch => {
                    swatch.classList.remove('selected');
                });
                
                // í˜„ì¬ ì„ íƒ í‘œì‹œ
                element.classList.add('selected');
                
                // ë°ì´í„° ì €ì¥
                window.PersonalColorApp.drapingData.selectedColors.push({
                    color: color,
                    timestamp: new Date(),
                    notes: ''
                });
                
                this.showToast(`ìƒ‰ìƒ ${color}ì´(ê°€) ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            }

            addDrapingComparison() {
                const selectedColors = window.PersonalColorApp.drapingData.selectedColors;
                const notes = document.getElementById('draping-notes').value;
                
                if (selectedColors.length === 0) {
                    this.showToast('ë¨¼ì € í…ŒìŠ¤íŠ¸í•  ìƒ‰ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.', 'warning');
                    return;
                }

                window.PersonalColorApp.drapingData.comparisons.push({
                    colors: [...selectedColors],
                    notes: notes,
                    timestamp: new Date()
                });

                // ë°ì´í„° ì´ˆê¸°í™”
                window.PersonalColorApp.drapingData.selectedColors = [];
                document.getElementById('draping-notes').value = '';
                document.querySelectorAll('.color-swatch').forEach(swatch => {
                    swatch.classList.remove('selected');
                });

                this.showToast('ë¹„êµ ë°ì´í„°ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }

            completeDraping() {
                const comparisons = window.PersonalColorApp.drapingData.comparisons;
                
                if (comparisons.length === 0) {
                    this.showToast('ìµœì†Œ í•œ ë²ˆì˜ ìƒ‰ìƒ ë¹„êµë¥¼ ì™„ë£Œí•´ì£¼ì„¸ìš”.', 'warning');
                    return;
                }

                // Mock ë“œë ˆì´í•‘ ê²°ê³¼ ìƒì„±
                const mockResult = {
                    season: 'autumn',
                    confidence: 93,
                    undertone: 'warm',
                    lightness: 'dark',
                    saturation: 'rich',
                    drapingData: comparisons
                };

                this.showDiagnosisResult(mockResult);
            }

            showDiagnosisResult(result) {
                console.log('âœ… ì§„ë‹¨ ê²°ê³¼:', result);
                
                window.PersonalColorApp.diagnosis = result;
                
                // ê²°ê³¼ ì˜ì—­ í‘œì‹œ
                const diagnosisArea = document.getElementById('diagnosis-area');
                const resultArea = document.getElementById('diagnosis-result');
                
                if (diagnosisArea) diagnosisArea.style.display = 'none';
                if (resultArea) {
                    resultArea.style.display = 'block';
                    resultArea.classList.add('active');
                }
                
                // ê²°ê³¼ ë‚´ìš© ì—…ë°ì´íŠ¸
                this.updateResultDisplay(result);
                
                // ê²°ê³¼ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì •
                this.setupResultButtons();
                
                this.currentMode = 'results';
                window.PersonalColorApp.currentMode = 'results';
            }

            updateResultDisplay(result) {
                const seasonName = this.getSeasonDisplayName(result.season);
                const seasonBadge = document.querySelector('.season-badge .season-name');
                const confidence = document.querySelector('.season-badge .confidence');
                
                if (seasonBadge) seasonBadge.textContent = seasonName;
                if (confidence) confidence.textContent = `${result.confidence}% í™•ì‹ `;
                
                // ì„¸ë¶€ ì •ë³´ ì—…ë°ì´íŠ¸
                const details = document.querySelectorAll('.detail-item .value');
                if (details.length >= 3) {
                    details[0].textContent = result.undertone === 'warm' ? 'ë”°ëœ»í•œ í†¤' : 'ì‹œì›í•œ í†¤';
                    details[1].textContent = result.lightness === 'light' ? 'ë°ì€ í†¤' : 'ì–´ë‘ìš´ í†¤';
                    details[2].textContent = result.saturation || 'ì¤‘ê°„ í†¤';
                }
            }

            setupResultButtons() {
                const generateBtn = document.getElementById('generate-report');
                const saveBtn = document.getElementById('save-result');
                const newBtn = document.getElementById('new-diagnosis');

                if (generateBtn) {
                    generateBtn.onclick = () => this.generateReport();
                }

                if (saveBtn) {
                    saveBtn.onclick = () => this.saveResult();
                }

                if (newBtn) {
                    newBtn.onclick = () => this.startNewDiagnosis();
                }
            }

            generateReport() {
                this.showToast('PDF ë³´ê³ ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤...', 'info');
                
                // Mock PDF ìƒì„±
                setTimeout(() => {
                    const result = window.PersonalColorApp.diagnosis;
                    const reportText = `
// index.html íŒŒì¼ì˜ 1431ë²ˆì§¸ ì¤„ ê·¼ì²˜ generateReport() í•¨ìˆ˜ë¥¼ ì´ê²ƒìœ¼ë¡œ êµì²´í•˜ì„¸ìš”!

generateReport() {
    const result = window.PersonalColorApp.diagnosis;
    if (!result) {
        this.showToast('ìƒì„±í•  ì§„ë‹¨ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.', 'error');
        return;
    }

    this.showToast('ì „ë¬¸ í¼ìŠ¤ë„ì»¬ëŸ¬ ë³´ê³ ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤...', 'info');

    // ì „ë¬¸ ë³´ê³ ì„œ ìƒì„±
    const reportHTML = this.createProfessionalReport({
        customer: window.PersonalColorApp.customer || { name: 'ê³ ê°ë‹˜', age: 25, gender: 'ì—¬ì„±' },
        season: result.season,
        confidence: result.confidence,
        undertone: result.undertone,
        lightness: result.lightness,
        saturation: result.saturation || 'medium'
    });

    // HTML íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ
    const fullHTML = `
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¼ìŠ¤ë„ì»¬ëŸ¬ ì§„ë‹¨ ë³´ê³ ì„œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Noto Sans KR', sans-serif; 
            line-height: 1.6; 
            color: #333; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px;
            background: #f8fafc;
        }
        .report-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        @media print {
            body { margin: 0; padding: 10px; background: white; }
            .no-print { display: none; }
            .report-container { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="report-container">
        ${reportHTML}
    </div>
    <div class="no-print" style="text-align: center; margin: 20px 0; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
        <button onclick="window.print()" style="background: #6366f1; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; margin-right: 15px; font-size: 16px;">ğŸ–¨ï¸ PDFë¡œ ì €ì¥</button>
        <button onclick="window.close()" style="background: #6b7280; color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">ë‹«ê¸°</button>
    </div>
</body>
</html>`;

    // ë‹¤ìš´ë¡œë“œ
    const blob = new Blob([fullHTML], { type: 'text/html;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    
    const link = document.createElement('a');
    link.href = url;
    link.download = `í¼ìŠ¤ë„ì»¬ëŸ¬_ì§„ë‹¨ë³´ê³ ì„œ_${Date.now()}.html`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);

    this.showToast('ğŸ‰ ì „ë¬¸ í¼ìŠ¤ë„ì»¬ëŸ¬ ì§„ë‹¨ ë³´ê³ ì„œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
}

// ì´ í•¨ìˆ˜ë„ ModeManager í´ë˜ìŠ¤ ì•ˆì— ì¶”ê°€í•˜ì„¸ìš”!
createProfessionalReport(data) {
    const seasonInfo = this.getSeasonInfo(data.season);
    const today = new Date().toLocaleDateString('ko-KR', {
        year: 'numeric',
        month: 'long', 
        day: 'numeric',
        weekday: 'long'
    });

    return `
        <div style="text-align: center; margin-bottom: 40px;">
            <h1 style="color: #2C3E50; font-size: 28px; margin-bottom: 10px;">
                ğŸ¨ í¼ìŠ¤ë„ ì»¬ëŸ¬ ì§„ë‹¨ ë³´ê³ ì„œ
            </h1>
            <div style="background: linear-gradient(135deg, ${seasonInfo.gradient}); color: white; padding: 15px; border-radius: 25px; display: inline-block;">
                <h2 style="margin: 0; font-size: 24px;">${seasonInfo.displayName}</h2>
                <div style="font-size: 14px; opacity: 0.9;">ì‹ ë¢°ë„ ${data.confidence}% â€¢ ${today}</div>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px;">
            <div style="background: #f8fafc; padding: 25px; border-radius: 12px;">
                <h3 style="color: #1f2937; margin-bottom: 15px; font-size: 18px;">ğŸ‘¤ ê³ ê° ì •ë³´</h3>
                <div style="line-height: 1.8; color: #4b5563;">
                    <div><strong>ì„±ëª…:</strong> ${data.customer.name}</div>
                    <div><strong>ì—°ë ¹:</strong> ${data.customer.age}ì„¸</div>
                    <div><strong>ì„±ë³„:</strong> ${data.customer.gender}</div>
                    <div><strong>ì§„ë‹¨ì¼:</strong> ${today}</div>
                    <div><strong>ì§„ë‹¨ì:</strong> Personal Color Pro AI</div>
                </div>
            </div>

            <div style="background: #f8fafc; padding: 25px; border-radius: 12px;">
                <h3 style="color: #1f2937; margin-bottom: 15px; font-size: 18px;">ğŸ“Š ì§„ë‹¨ ê²°ê³¼</h3>
                <div style="line-height: 1.8; color: #4b5563;">
                    <div><strong>ê³„ì ˆ íƒ€ì…:</strong> <span style="color: ${seasonInfo.color};">${seasonInfo.displayName}</span></div>
                    <div><strong>ì–¸ë”í†¤:</strong> ${data.undertone === 'warm' ? 'ì›œí†¤ (ë”°ëœ»í•¨)' : 'ì¿¨í†¤ (ì°¨ê°€ì›€)'}</div>
                    <div><strong>ëª…ë„:</strong> ${data.lightness === 'deep' ? 'ë”¥ (ê¹Šê³  ì§„í•¨)' : 'ë¼ì´íŠ¸ (ë°ê³  ì—°í•¨)'}</div>
                    <div><strong>ì±„ë„:</strong> ${data.saturation === 'rich' ? 'ë¦¬ì¹˜ (í’ë¶€í•¨)' : 'ì†Œí”„íŠ¸ (ë¶€ë“œëŸ¬ì›€)'}</div>
                    <div><strong>ì§„ë‹¨ ì •í™•ë„:</strong> ${data.confidence}%</div>
                </div>
            </div>
        </div>

        <div style="margin-bottom: 40px;">
            <h3 style="color: #1f2937; margin-bottom: 20px; font-size: 20px; text-align: center;">ğŸŒŸ ${seasonInfo.displayName} íŠ¹ì§•</h3>
            <div style="background: linear-gradient(135deg, ${seasonInfo.gradient}); color: white; padding: 25px; border-radius: 15px; text-align: center;">
                <div style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
                    ${seasonInfo.description}
                </div>
                <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                    <div style="background: rgba(255,255,255,0.2); padding: 10px 15px; border-radius: 8px;">
                        <strong>í‚¤ì›Œë“œ:</strong> ${seasonInfo.keywords.join(', ')}
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-bottom: 40px;">
            <h3 style="color: #1f2937; margin-bottom: 20px; font-size: 20px; text-align: center;">ğŸ¨ ì¶”ì²œ ìƒ‰ìƒ íŒ”ë ˆíŠ¸</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px;">
                ${seasonInfo.bestColors.slice(0, 5).map((color, index) => `
                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; background: ${color.hex}; border-radius: 50%; margin: 0 auto 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);"></div>
                        <div style="font-size: 14px; color: #4b5563;">${color.name}</div>
                    </div>
                `).join('')}
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px;">
            <div>
                <h3 style="color: #059669; margin-bottom: 15px;">âœ… ì¶”ì²œ ìƒ‰ìƒ</h3>
                <div style="background: #ecfdf5; padding: 20px; border-radius: 10px; border-left: 4px solid #059669;">
                    ${seasonInfo.bestColors.slice(0, 5).map(color => `
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 20px; height: 20px; background: ${color.hex}; border-radius: 3px; margin-right: 10px; border: 1px solid #ddd;"></div>
                            <span style="font-weight: 500;">${color.name}</span>
                        </div>
                    `).join('')}
                </div>
            </div>

            <div>
                <h3 style="color: #dc2626; margin-bottom: 15px;">âŒ í”¼í•´ì•¼ í•  ìƒ‰ìƒ</h3>
                <div style="background: #fef2f2; padding: 20px; border-radius: 10px; border-left: 4px solid #dc2626;">
                    ${seasonInfo.avoidColors.slice(0, 4).map(color => `
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 20px; height: 20px; background: ${color.hex}; border-radius: 3px; margin-right: 10px; border: 1px solid #ddd;"></div>
                            <span style="font-weight: 500;">${color.name}</span>
                        </div>
                    `).join('')}
                </div>
            </div>
        </div>

        <div style="margin-bottom: 40px;">
            <h3 style="color: #1f2937; margin-bottom: 20px; text-align: center;">ğŸ’„ í™”ì¥í’ˆ ì¶”ì²œ</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                ${seasonInfo.makeup.map(item => `
                    <div style="background: #f8fafc; padding: 20px; border-radius: 10px; border: 1px solid #e5e7eb;">
                        <h4 style="color: #374151; margin-bottom: 10px;">${item.category}</h4>
                        <ul style="color: #6b7280; line-height: 1.6; margin: 0; padding-left: 20px;">
                            ${item.products.map(product => `<li>${product}</li>`).join('')}
                        </ul>
                    </div>
                `).join('')}
            </div>
        </div>

        <div style="margin-bottom: 40px;">
            <h3 style="color: #1f2937; margin-bottom: 20px; text-align: center;">âœ‚ï¸ í—¤ì–´ì»¬ëŸ¬ ì¶”ì²œ</h3>
            <div style="background: #f8fafc; padding: 25px; border-radius: 12px; text-align: center;">
                <div style="display: flex; justify-content: center; gap: 30px; margin-bottom: 20px;">
                    ${seasonInfo.hairColors.map(hair => `
                        <div style="text-align: center;">
                            <div style="width: 60px; height: 60px; background: ${hair.color}; border-radius: 50%; margin: 0 auto 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.2);"></div>
                            <div style="font-weight: 500; color: #374151;">${hair.name}</div>
                        </div>
                    `).join('')}
                </div>
                <div style="color: #6b7280; line-height: 1.6;">
                    <strong>ì¶”ì²œ ì´ìœ :</strong> ${seasonInfo.hairReason}
                </div>
            </div>
        </div>

        <div style="margin-bottom: 30px;">
            <h3 style="color: #1f2937; margin-bottom: 15px; text-align: center;">ğŸ“ ì „ë¬¸ê°€ ì¡°ì–¸</h3>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 15px;">
                <div style="font-size: 16px; line-height: 1.7; text-align: center;">
                    ğŸ’¡ <strong>${data.customer.name}ë‹˜ì€ ${seasonInfo.displayName}ì…ë‹ˆë‹¤.</strong><br><br>
                    ${seasonInfo.advice}
                </div>
            </div>
        </div>

        <div style="border-top: 2px solid #e5e7eb; padding-top: 20px; text-align: center; color: #6b7280;">
            <div style="margin-bottom: 10px;">
                <strong>Personal Color Pro</strong> v1.0.0 | í—¤ì–´ë””ìì´ë„ˆ ì „ìš© í¼ìŠ¤ë„ì»¬ëŸ¬ ì§„ë‹¨ ì‹œìŠ¤í…œ
            </div>
            <div style="font-size: 14px;">
                ì§„ë‹¨ì¼: ${today} | AI ë¶„ì„ ì •í™•ë„: ${data.confidence}% | ë¬¸ì˜: personalcolor@pro.com
            </div>
        </div>
    `;
}

// getSeasonInfo í•¨ìˆ˜ë„ ModeManager í´ë˜ìŠ¤ ì•ˆì— ì¶”ê°€í•˜ì„¸ìš”!
getSeasonInfo(season) {
    const seasons = {
        spring: {
            displayName: 'ë´„ ì›œí†¤ (Spring Warm)',
            color: '#ff6b6b',
            gradient: '#ff6b6b, #feca57',
            description: 'ë°ê³  í™”ì‚¬í•œ ë´„ì˜ ì—ë„ˆì§€ë¥¼ ê°€ì§„ ë”°ëœ»í•œ í†¤ì…ë‹ˆë‹¤. ìƒê¸° ë„˜ì¹˜ê³  í™œê¸°ì°¬ ìƒ‰ìƒë“¤ì´ í”¼ë¶€ë¥¼ ë”ìš± í™˜í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.',
            keywords: ['ë°ìŒ', 'í™œê¸°ì°¸', 'ë”°ëœ»í•¨', 'ìƒê¸°', 'í™”ì‚¬í•¨'],
            bestColors: [
                { name: 'ì½”ë„ í•‘í¬', hex: '#ff6b6b' },
                { name: 'ê³¨ë“  ì˜ë¡œìš°', hex: '#feca57' },
                { name: 'í”¼ì¹˜ ì˜¤ë Œì§€', hex: '#ff9ff3' },
                { name: 'ì•„ì´ë³´ë¦¬', hex: '#fff8e7' },
                { name: 'ì¹´í‚¤ ê·¸ë¦°', hex: '#6ab04c' }
            ],
            avoidColors: [
                { name: 'ì•„ì´ì‹œ ë¸”ë£¨', hex: '#74b9ff' },
                { name: 'í“¨ì–´ ë¸”ë™', hex: '#2d3436' },
                { name: 'ì‹¤ë²„ ê·¸ë ˆì´', hex: '#b2bec3' },
                { name: 'ë„¤ì´ë¹„', hex: '#2d3436' }
            ],
            makeup: [
                { category: 'ë¦½ ì œí’ˆ', products: ['ì½”ë„ ë¦½ìŠ¤í‹±', 'í”¼ì¹˜ ê¸€ë¡œìŠ¤', 'ì˜¤ë Œì§€ í‹´íŠ¸'] },
                { category: 'ì•„ì´ì„€ë„', products: ['ê³¨ë“œ ë¸Œë¼ìš´', 'ì›œ ë² ì´ì§€', 'ì½”í¼ ë¸Œë¡ ì¦ˆ'] },
                { category: 'ë¸”ëŸ¬ì…”', products: ['ì½”ë„ ë¸”ëŸ¬ì…”', 'í”¼ì¹˜ ë¸”ëŸ¬ì…”'] },
                { category: 'ë² ì´ìŠ¤', products: ['ì›œ ë² ì´ì§€ íŒŒìš´ë°ì´ì…˜', 'ê³¨ë“  ì–¸ë”í†¤ ì»¨ì‹¤ëŸ¬'] }
            ],
            hairColors: [
                { name: 'ê³¨ë“  ë¸Œë¼ìš´', color: '#cd853f' },
                { name: 'í—ˆë‹ˆ ë¸”ë¡ ë“œ', color: '#daa520' },
                { name: 'ì¹´ë¼ë©œ ë¸Œë¼ìš´', color: '#d2691e' }
            ],
            hairReason: 'ë”°ëœ»í•œ ê³¨ë“œ í†¤ì´ ë“¤ì–´ê°„ í—¤ì–´ì»¬ëŸ¬ê°€ ë´„ ì›œí†¤ì˜ í™”ì‚¬í•¨ì„ ê·¹ëŒ€í™”ì‹œì¼œì¤ë‹ˆë‹¤.',
            advice: 'ë°ê³  ë”°ëœ»í•œ ìƒ‰ìƒë“¤ì´ ë‹¹ì‹ ì˜ ìì—°ìŠ¤ëŸ¬ìš´ ì•„ë¦„ë‹¤ì›€ì„ ë‹ë³´ì´ê²Œ í•©ë‹ˆë‹¤.'
        },
        summer: {
            displayName: 'ì—¬ë¦„ ì¿¨í†¤ (Summer Cool)',
            color: '#74b9ff',
            gradient: '#74b9ff, #a29bfe',
            description: 'ì‹œì›í•˜ê³  ìš°ì•„í•œ ì—¬ë¦„ì˜ í’ˆê²©ì„ ê°€ì§„ ì¿¨í†¤ì…ë‹ˆë‹¤. ë¶€ë“œëŸ½ê³  ì„¸ë ¨ëœ ìƒ‰ìƒë“¤ì´ ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë§¤ë ¥ì„ ì—°ì¶œí•©ë‹ˆë‹¤.',
            keywords: ['ì‹œì›í•¨', 'ìš°ì•„í•¨', 'ì„¸ë ¨ë¨', 'ë¶€ë“œëŸ¬ì›€', 'ê³ ê¸‰ìŠ¤ëŸ¬ì›€'],
            bestColors: [
                { name: 'ì†Œí”„íŠ¸ í•‘í¬', hex: '#fd79a8' },
                { name: 'ë¼ë²¤ë”', hex: '#a29bfe' },
                { name: 'ë¡œì¦ˆ ê·¸ë ˆì´', hex: '#ddd' },
                { name: 'ì•„ì´ìŠ¤ ë¸”ë£¨', hex: '#74b9ff' },
                { name: 'ë¯¼íŠ¸ ê·¸ë¦°', hex: '#00cec9' }
            ],
            avoidColors: [
                { name: 'ì˜¤ë Œì§€', hex: '#e17055' },
                { name: 'ê³¨ë“œ', hex: '#fdcb6e' },
                { name: 'ë¸Œë¼ìš´', hex: '#6c5ce7' },
                { name: 'ì¹´í‚¤', hex: '#6ab04c' }
            ],
            makeup: [
                { category: 'ë¦½ ì œí’ˆ', products: ['ë¡œì¦ˆ í•‘í¬ ë¦½ìŠ¤í‹±', 'ë² ë¦¬ ê¸€ë¡œìŠ¤', 'ì¿¨í†¤ ë ˆë“œ'] },
                { category: 'ì•„ì´ì„€ë„', products: ['ì¿¨ ë¸Œë¼ìš´', 'ì‹¤ë²„ ê·¸ë ˆì´', 'ë¼ë²¤ë”'] },
                { category: 'ë¸”ëŸ¬ì…”', products: ['ë¡œì¦ˆ ë¸”ëŸ¬ì…”', 'í•‘í¬ ë¸”ëŸ¬ì…”'] },
                { category: 'ë² ì´ìŠ¤', products: ['í•‘í¬ ì–¸ë”í†¤ íŒŒìš´ë°ì´ì…˜', 'ì¿¨í†¤ ì»¨ì‹¤ëŸ¬'] }
            ],
            hairColors: [
                { name: 'ì• ì‰¬ ë¸Œë¼ìš´', color: '#8b7355' },
                { name: 'í”Œë˜í‹°ë„˜ ë¸”ë¡ ë“œ', color: '#f5f5dc' },
                { name: 'ë²„ê±´ë””', color: '#800020' }
            ],
            hairReason: 'ì°¨ê°€ìš´ í†¤ì˜ í—¤ì–´ì»¬ëŸ¬ê°€ ì—¬ë¦„ ì¿¨í†¤ì˜ ìš°ì•„í•˜ê³  ì„¸ë ¨ëœ ì´ë¯¸ì§€ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.',
            advice: 'ì°¨ê°€ìš°ë©´ì„œë„ ë¶€ë“œëŸ¬ìš´ ìƒ‰ìƒë“¤ì´ ë‹¹ì‹ ì˜ ìš°ì•„í•œ ë§¤ë ¥ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.'
        },
        autumn: {
            displayName: 'ê°€ì„ ì›œí†¤ (Autumn Warm)',
            color: '#d63031',
            gradient: '#d63031, #e17055',
            description: 'ê¹Šê³  í’ë¶€í•œ ê°€ì„ì˜ ë”°ëœ»í•¨ì„ ê°€ì§„ ì›œí†¤ì…ë‹ˆë‹¤. ê³ ê¸‰ìŠ¤ëŸ½ê³  ì„±ìˆ™í•œ ìƒ‰ìƒë“¤ì´ ê°•ì¸í•˜ë©´ì„œë„ ìš°ì•„í•œ ë§¤ë ¥ì„ ì—°ì¶œí•©ë‹ˆë‹¤.',
            keywords: ['ê¹Šì´', 'í’ë¶€í•¨', 'ì„±ìˆ™í•¨', 'ê³ ê¸‰ìŠ¤ëŸ¬ì›€', 'ê°•ì¸í•¨'],
            bestColors: [
                { name: 'ë”¥ ë ˆë“œ', hex: '#d63031' },
                { name: 'ê³¨ë“  ì˜ë¡œìš°', hex: '#fdcb6e' },
                { name: 'ë²ˆíŠ¸ ì˜¤ë Œì§€', hex: '#e17055' },
                { name: 'ì˜¬ë¦¬ë¸Œ ê·¸ë¦°', hex: '#6c5ce7' },
                { name: 'ì¹´ë¼ë©œ ë¸Œë¼ìš´', hex: '#d2691e' }
            ],
            avoidColors: [
                { name: 'íŒŒìŠ¤í…” í•‘í¬', hex: '#fd79a8' },
                { name: 'ì•„ì´ìŠ¤ ë¸”ë£¨', hex: '#74b9ff' },
                { name: 'ë¼ë²¤ë”', hex: '#a29bfe' },
                { name: 'ì‹¤ë²„', hex: '#b2bec3' }
            ],
            makeup: [
                { category: 'ë¦½ ì œí’ˆ', products: ['ë”¥ ë ˆë“œ ë¦½ìŠ¤í‹±', 'ë¸Œë¼ìš´ ê¸€ë¡œìŠ¤', 'ë²ˆíŠ¸ ì˜¤ë Œì§€ í‹´íŠ¸'] },
                { category: 'ì•„ì´ì„€ë„', products: ['ê³¨ë“œ ë¸Œë¼ìš´', 'ë”¥ ë¸Œë¡ ì¦ˆ', 'ì˜¬ë¦¬ë¸Œ ê·¸ë¦°'] },
                { category: 'ë¸”ëŸ¬ì…”', products: ['í…Œë¼ì½”íƒ€ ë¸”ëŸ¬ì…”', 'í”¼ì¹˜ ë¸Œë¼ìš´'] },
                { category: 'ë² ì´ìŠ¤', products: ['ê³¨ë“  ì–¸ë”í†¤ íŒŒìš´ë°ì´ì…˜', 'ì›œí†¤ ì»¨ì‹¤ëŸ¬'] }
            ],
            hairColors: [
                { name: 'ì´ˆì½œë¦¿ ë¸Œë¼ìš´', color: '#8b4513' },
                { name: 'ì˜¤ë²ˆ', color: '#a0522d' },
                { name: 'ë”¥ ë ˆë“œ', color: '#8b0000' }
            ],
            hairReason: 'ê¹Šê³  í’ë¶€í•œ ë¸Œë¼ìš´ ê³„ì—´ ìƒ‰ìƒì´ ê°€ì„ ì›œí†¤ì˜ ì„±ìˆ™í•˜ê³  ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë§¤ë ¥ì„ ê°•ì¡°í•©ë‹ˆë‹¤.',
            advice: 'ê¹Šê³  í’ë¶€í•œ ìƒ‰ìƒë“¤ì´ ë‹¹ì‹ ì˜ ì„±ìˆ™í•œ ë§¤ë ¥ì„ ë‹ë³´ì´ê²Œ í•©ë‹ˆë‹¤.'
        },
        winter: {
            displayName: 'ê²¨ìš¸ ì¿¨í†¤ (Winter Cool)',
            color: '#2d3436',
            gradient: '#2d3436, #6c5ce7',
            description: 'ê°•ë ¬í•˜ê³  ì„ ëª…í•œ ê²¨ìš¸ì˜ ì¹´ë¦¬ìŠ¤ë§ˆë¥¼ ê°€ì§„ ì¿¨í†¤ì…ë‹ˆë‹¤. ëŒ€ë¹„ê°€ ê°•í•œ ìƒ‰ìƒë“¤ì´ ë„ì‹œì ì´ê³  ì„¸ë ¨ëœ ë§¤ë ¥ì„ ì—°ì¶œí•©ë‹ˆë‹¤.',
            keywords: ['ê°•ë ¬í•¨', 'ì„ ëª…í•¨', 'ì¹´ë¦¬ìŠ¤ë§ˆ', 'ë„ì‹œì ', 'ì„¸ë ¨ë¨'],
            bestColors: [
                { name: 'í“¨ì–´ ë¸”ë™', hex: '#2d3436' },
                { name: 'ë¡œì—´ ë¸”ë£¨', hex: '#0984e3' },
                { name: 'ì—ë©”ë„ë“œ', hex: '#00b894' },
                { name: 'í“¨ì–´ í™”ì´íŠ¸', hex: '#ffffff' },
                { name: 'ë”¥ í¼í”Œ', hex: '#6c5ce7' }
            ],
            avoidColors: [
                { name: 'ì˜¤ë Œì§€', hex: '#e17055' },
                { name: 'ë² ì´ì§€', hex: '#ddd' },
                { name: 'ê³¨ë“œ', hex: '#fdcb6e' },
                { name: 'ì¹´í‚¤', hex: '#6ab04c' }
            ],
            makeup: [
                { category: 'ë¦½ ì œí’ˆ', products: ['ë ˆë“œ ë¦½ìŠ¤í‹±', 'ë² ë¦¬ ê¸€ë¡œìŠ¤', 'í”ŒëŸ¼ í‹´íŠ¸'] },
                { category: 'ì•„ì´ì„€ë„', products: ['ì¿¨ ë¸Œë¼ìš´', 'ì‹¤ë²„', 'ë¸”ë£¨ ê·¸ë ˆì´'] },
                { category: 'ë¸”ëŸ¬ì…”', products: ['ë¡œì¦ˆ ë¸”ëŸ¬ì…”', 'ë² ë¦¬ ë¸”ëŸ¬ì…”'] },
                { category: 'ë² ì´ìŠ¤', products: ['í•‘í¬ ì–¸ë”í†¤ íŒŒìš´ë°ì´ì…˜', 'ì¿¨í†¤ ì»¨ì‹¤ëŸ¬'] }
            ],
            hairColors: [
                { name: 'ì ¯ ë¸”ë™', color: '#000000' },
                { name: 'ì• ì‰¬ ë¸Œë¼ìš´', color: '#696969' },
                { name: 'í”Œë˜í‹°ë„˜', color: '#e5e5e5' }
            ],
            hairReason: 'ê°•ë ¬í•˜ê³  ì„ ëª…í•œ í—¤ì–´ì»¬ëŸ¬ê°€ ê²¨ìš¸ ì¿¨í†¤ì˜ ì¹´ë¦¬ìŠ¤ë§ˆ ìˆê³  ë„ì‹œì ì¸ ë§¤ë ¥ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.',
            advice: 'ê°•ë ¬í•˜ê³  ì„ ëª…í•œ ìƒ‰ìƒë“¤ì´ ë‹¹ì‹ ì˜ ë„ì‹œì ì¸ ë§¤ë ¥ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.'
        }
    };
    
    return seasons[season] || seasons.spring;
}

            saveResult() {
                try {
                    const results = JSON.parse(localStorage.getItem('diagnosis_results') || '[]');
                    results.push({
                        ...window.PersonalColorApp.diagnosis,
                        customer: window.PersonalColorApp.customer,
                        timestamp: new Date().toISOString()
                    });
                    
                    if (results.length > 100) results.shift();
                    
                    localStorage.setItem('diagnosis_results', JSON.stringify(results));
                    this.showToast('ì§„ë‹¨ ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                } catch (error) {
                    this.showToast('ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                }
            }

            startNewDiagnosis() {
                // ìƒíƒœ ì´ˆê¸°í™”
                window.PersonalColorApp.currentMode = 'selection';
                window.PersonalColorApp.diagnosis = null;
                window.PersonalColorApp.drapingData = {
                    selectedColors: [],
                    notes: '',
                    comparisons: []
                };

                // UI ì´ˆê¸°í™”
                this.switchToMode('selection');
                
                this.showToast('ìƒˆ ì§„ë‹¨ì„ ì‹œì‘í•©ë‹ˆë‹¤.', 'info');
            }

            getModeDisplayName(mode) {
                const names = {
                    ai_photo: 'AI ì‚¬ì§„ ë¶„ì„',
                    draping: 'ì „ë¬¸ê°€ ë“œë ˆì´í•‘',
                    hybrid: 'í•˜ì´ë¸Œë¦¬ë“œ',
                    selection: 'ëª¨ë“œ ì„ íƒ'
                };
                return names[mode] || mode;
            }

            getSeasonDisplayName(season) {
                const names = {
                    spring: 'ë´„ ì›œí†¤',
                    summer: 'ì—¬ë¦„ ì¿¨í†¤',
                    autumn: 'ê°€ì„ ì›œí†¤',
                    winter: 'ê²¨ìš¸ ì¿¨í†¤'
                };
                return names[season] || season;
            }

            showToast(message, type = 'info', duration = 5000) {
                const container = document.getElementById('toast-container');
                if (!container) return;

                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                
                const icons = {
                    success: 'âœ…',
                    error: 'âŒ',
                    warning: 'âš ï¸',
                    info: 'â„¹ï¸'
                };

                toast.innerHTML = `
                    <div class="toast-content">
                        <span class="toast-icon">${icons[type] || 'â„¹ï¸'}</span>
                        <span class="toast-message">${message}</span>
                        <button class="toast-close">Ã—</button>
                    </div>
                `;

                container.appendChild(toast);

                // í‘œì‹œ ì• ë‹ˆë©”ì´ì…˜
                setTimeout(() => toast.classList.add('show'), 100);

                // ìë™ ì œê±°
                const autoRemove = setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 300);
                }, duration);

                // ìˆ˜ë™ ë‹«ê¸°
                const closeBtn = toast.querySelector('.toast-close');
                if (closeBtn) {
                    closeBtn.onclick = () => {
                        clearTimeout(autoRemove);
                        toast.classList.remove('show');
                        setTimeout(() => {
                            if (toast.parentNode) {
                                toast.parentNode.removeChild(toast);
                            }
                        }, 300);
                    };
                }
            }
        }

        // ì „ì—­ ëª¨ë“œ ê´€ë¦¬ì
        window.modeManager = null;

        // DOM ì¤€ë¹„ ì™„ë£Œ ì²˜ë¦¬
        document.addEventListener('DOMContentLoaded', () => {
            console.log('âœ… DOM ë¡œë“œ ì™„ë£Œ');
            
            // ëª¨ë“œ ê´€ë¦¬ì ì´ˆê¸°í™”
            window.modeManager = new ModeManager();
            
            // í—¤ë” ë²„íŠ¼ ì´ë²¤íŠ¸
            const customerBtn = document.getElementById('customer-management');
            const settingsBtn = document.getElementById('settings-btn');
            const closeSidebarBtn = document.getElementById('close-sidebar');

            if (customerBtn) {
                customerBtn.onclick = () => {
                    const sidebar = document.getElementById('sidebar');
                    if (sidebar) {
                        sidebar.classList.add('show');
                    }
                };
            }

            if (settingsBtn) {
                settingsBtn.onclick = () => {
                    if (window.modeManager) {
                        window.modeManager.showToast('ì„¤ì • ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.', 'info');
                    }
                };
            }

            if (closeSidebarBtn) {
                closeSidebarBtn.onclick = () => {
                    const sidebar = document.getElementById('sidebar');
                    if (sidebar) {
                        sidebar.classList.remove('show');
                    }
                };
            }

            console.log('âœ… ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì™„ë£Œ');
        });

        // ì—ëŸ¬ ì²˜ë¦¬
        window.addEventListener('error', (e) => {
            console.error('ì „ì—­ ì—ëŸ¬:', e.error);
        });

        // ì•± ë¡œë”© ì‹œë®¬ë ˆì´ì…˜
        function startLoadingSequence() {
            console.log('ğŸš€ Personal Color Pro ì‹œì‘');
            
            // 1ë‹¨ê³„: ì„¤ì •
            window.loadingManager.updateStep('step-config', 'active');
            setTimeout(() => {
                window.loadingManager.updateStep('step-config', 'complete', 'ì„¤ì • ë¡œë“œ ì™„ë£Œ');
                window.loadingManager.updateProgress(25);
                
                // 2ë‹¨ê³„: ëª¨ë“ˆ
                window.loadingManager.updateStep('step-modules', 'active');
                setTimeout(() => {
                    window.loadingManager.updateStep('step-modules', 'complete', 'ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
                    window.loadingManager.updateProgress(50);
                    
                    // 3ë‹¨ê³„: AI
                    window.loadingManager.updateStep('step-ai', 'active');
                    setTimeout(() => {
                        window.loadingManager.updateStep('step-ai', 'complete', 'AI ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ');
                        window.loadingManager.updateProgress(75);
                        
                        // 4ë‹¨ê³„: UI
                        window.loadingManager.updateStep('step-ui', 'active');
                        setTimeout(() => {
                            window.loadingManager.updateStep('step-ui', 'complete', 'UI ì´ˆê¸°í™” ì™„ë£Œ');
                            window.loadingManager.updateProgress(100);
                            
                            // ì™„ë£Œ
                            setTimeout(() => {
                                window.loadingManager.complete();
                                console.log('ğŸ‰ Personal Color Pro ë¡œë”© ì™„ë£Œ!');
                            }, 500);
                        }, 800);
                    }, 600);
                }, 800);
            }, 500);
        }

        // ë¡œë”© ì‹œì‘
        startLoadingSequence();
    </script>

    <!-- PWA ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ (404 ì˜¤ë¥˜ ë¬´ì‹œ) -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('âœ… SW ë“±ë¡ ì„±ê³µ');
                    })
                    .catch(error => {
                        console.log('âš ï¸ SW ë“±ë¡ ì‹¤íŒ¨ (ë¬´ì‹œë¨):', error);
                    });
            });
        }
    </script>

    <!-- ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ë“¤ (404 ì˜¤ë¥˜ ë°©ì§€) -->
    <script>
        window.addEventListener('appLoaded', () => {
            console.log('ğŸ“¦ ì¶”ê°€ ëª¨ë“ˆë“¤ ë¡œë”© ì‹œì‘');
            
            const scripts = [
                { src: 'js/config.js', required: false },
                { src: 'js/utils/validation.js', required: false },
                { src: 'js/utils/performance.js', required: false },
                { src: 'js/utils/analytics.js', required: false }
            ];
            
            scripts.forEach((script, index) => {
                setTimeout(() => {
                    const scriptEl = document.createElement('script');
                    scriptEl.src = script.src;
                    scriptEl.async = true;
                    scriptEl.onerror = () => {
                        console.warn(`ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨ (ë¬´ì‹œë¨): ${script.src}`);
                    };
                    document.head.appendChild(scriptEl);
                }, index * 200);
            });
        });
    </script>
</body>
</html>
